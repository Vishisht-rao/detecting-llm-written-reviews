# Detecting LLM-Written Peer Reviews

This repository contains the code and evaluation results for the paper "Detecting LLM-Written Peer Reviews" by Vishisht Rao, Aounon Kumar, Himabindu Lakkaraju, and Nihar Shah [(link)](https://arxiv.org/abs/2503.15772). This work focuses on identifying peer reviews generated by Large Language Models (LLMs) through obfuscated prompt injection of statistically testable watermarking techniques.


## Repository Structure

The repository is organized as follows:

- **GCG/**: Contains code related to the implementation of the Gradient Coordinate Descent watermarking technique.

- **Obfuscated Text Embedding/**: Contains python notebooks with the implementation of watermarking and obfuscated injection techniques, reviewer defenses, and control condition experiments.

- **Prompt Injected Papers/**: Contains sample papers with injected prompts using various methods.

- **Results**: Contains all evaluation results.

Below are further details on each of the directories.

### GCG

Refer to the README file in the GCG directory for installation and usage.

### Obfuscated Text Embedding

- The file "WM All9.ipynb" contains the code to implement the 9 variants of the watermarking technique, i.e. 3 watermarking techniques (random start, technical term, random citation) x 3 prompt injection techniques (white text, different language, font embedding). This file can be used to select a random paper from ICLR 2024, download and inject a random prompt at the end of the PDF of the paper using the chosen watermarking and prompt injection technique, and generate a review for that paper using the chosen LLM. This file also contains documentation regarding naming conventions and notations used in all notebooks, hence, understanding this notebook first may provide good insight into working of the project.

- The file "WM Control.ipynb" contains the implementations of the three algorithms in the paper in a control condition, i.e. reviews where our watermarks have not been embedded.

- The file "WM Grants.ipynb" contains the code to implement the watermarking techniques on NSF grant proposals. In essence, it is very similar to "WM All9.ipynb".

- The file "WM Paraphrase.ipynb" contains the code for the paraphrasing reviewer defense.

- The file "WM SusCheck.ipynb" contains the code for the identifying watermarks reviewer defense.

- The file "WM PosReview.ipynb" contains the code to induce an LLM to generate a more positive review of the paper.

### Prompt Injected Papers

This directory contains a sample paper of each of the different types of prompt injections studied.

### Results

- The directory "ControlExperiments" contain metrics obtained when Algorithm 1 and Algorithm 2/3 were run on ICLR 2021 and ICLR 2024 reviews augmented with 100 reviews containing one of the chosen watermarks.

- The directory "GrantProposals" contains the LLM-generated reviews for the three watermarking techniques.

- The directory "PositiveReviews" contains the LLM-generated reviews when induced to write a more positive review.

- The directory "ReviewerDefenses" is structured as follows:
  - "LastPageAttack" contains LLM-generated reviews for two types of watermarks discussed.
  - "Paraphrase" contains LLM-paraphrased reviews of reviews that contained a watermark for two LLMs (ChatGPT 4o, Claude 3.5 Sonnet) for the three watermarking techniques.
  - "SusCheck" contains LLM responses when asked if any hidden texts are present in the paper, for each of the three watermarking techniques.

- The directory "Watermarking" contains LLM-generated reviews for five LLMs discussed in the paper, for different watermarking and prompt injection techniques as discussed in the paper.

